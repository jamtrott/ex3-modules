#%Module
#
# PETSc 3.11.3 (System gcc-7.4.0)
#
#
set version 3.11.3

proc ModulesHelp { } {
	global version
	puts stderr "\tSets up the environment for PETSc $version (System gcc-7.4.0)\n"
	puts stderr "\t- PETSC_ROOT"
	puts stderr "\t- PETSC_DIR"
	puts stderr "\t- PETSC_INCDIR"
	puts stderr "\t- PETSC_LIBDIR"
	puts stderr "\t- PETSC_INCLUDEDIR"
	puts stderr "\t- PETSC_LIBRARYDIR"
	puts stderr "\t- C_INCLUDE_PATH"
	puts stderr "\t- CPLUS_INCLUDE_PATH"
	puts stderr "\t- LIBRARY_PATH"
	puts stderr "\t- LD_LIBRARY_PATH"
}

module-whatis "Portable, Extensible Toolkit for Scientific Computation"
module-whatis "https://www.mcs.anl.gov/petsc/"

prereq openblas/dynamic/0.3.7
prereq openmpi/gcc/64/4.0.1
prereq hwloc/gcc/2.0.4
prereq hypre/gcc/2.17.0
prereq metis/gcc/5.1.0
prereq mumps/gcc/5.2.1
prereq parmetis/gcc/4.0.3
prereq scalapack/gcc/2.0.2
prereq scotch/gcc/6.0.7
prereq suitesparse/gcc/5.4.0
prereq superlu/gcc/5.2.1
prereq superlu_dist/gcc/6.1.1

set pkghome /cm/shared/apps/petsc/gcc/$version

setenv PETSC_ROOT $pkghome
setenv PETSC_DIR $pkghome
setenv PETSC_INCDIR $pkghome/include
setenv PETSC_LIBDIR $pkghome/lib
setenv PETSC_INCLUDEDIR $pkghome/include
setenv PETSC_LIBRARYDIR $pkghome/lib

prepend-path C_INCLUDE_PATH $pkghome/include
prepend-path CPLUS_INCLUDE_PATH $pkghome/include
prepend-path LIBRARY_PATH $pkghome/lib
prepend-path LD_LIBRARY_PATH $pkghome/lib

unset pkghome

set MSG "PETSc $version (System gcc-7.4.0-1ubuntu1~18.04.1)"
